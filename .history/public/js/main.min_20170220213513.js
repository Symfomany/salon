$(function(){function e(){return 0==$(".invalid").length&&$("#lastname").val().match(a)&&$("#firstname").val().match(a)&&$("#compagny").val().match(a)&&$("#fonction").val().match(a)&&$("#email").val().match(d)&&$("#phone").val().match(c)&&$("#siren").val().match(b)}NProgress.set(.1),$("input#siren").length&&$("input#phone").length&&($("input#siren").mask("000 000 000"),$("input#phone").mask("00 00 00 00 00"));var a=/.{2,}/,b=/^(RCS )?([0-9]{3} ){2}[0-9]{3}$|^([0-9]{3} ){3}[0-9]{4}$/,c=/^(0|\+33)[1-9]([-. ]?[0-9]{2}){4}$/,d=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;$("input#firstname, input#lastname").blur(function(){$(this).val($(this).val().charAt(0).toUpperCase()+$(this).val().slice(1)),NProgress.set(.15)}),$('form button[type="button"]').click(function(){e()&&($(".tabs .tab:eq(1)").removeClass("disabled"),$("ul.tabs").tabs("select_tab","two"),NProgress.set(.66))}),$.ajax({type:"GET",url:"index.php/importer",success:function(a){$("input.autocomplete").autocomplete({limit:52,data:a,onAutocomplete:function(a){$.get("index.php/accord/"+a.toLowerCase(),function(a){$("div#list").html(a)}),$("input.autocomplete").parents(".animated").find("i").text("done").addClass("teal-text"),e()&&($("form #one button").attr("disabled",!1),NProgress.set(.33))}})}}),$("input#compagny").blur(function(a){$(this).val($(this).val().toUpperCase())}),$("input.autocomplete").keyup(function(a){13!=a.which&&$("form #one button").attr("disabled",!0)}),$('input:not(".autocomplete")').on("keyup blur",function(){e()||""!=$("input.autocomplete").val()?""==$("input.autocomplete").val()?$("form #one button").attr("disabled",!0):e()?($("form #one button").attr("disabled",!1),NProgress.set(.25)):$("form #one button").attr("disabled",!0):$("form #one button").attr("disabled",!0)}),$('input[type="email"]').blur(function(a){$("#email").val().match(d)?$.get("index.php/already",{email:$(this).val()},function(a){1==a?(Materialize.toast("Votre email existe déjà",4e3),$('input[type="email"]').addClass("invalid"),$("#email").parents(".animated").find("i").text("warning").removeClass("teal-text").addClass("red-text")):($('input[type="email"]').addClass("valid"),NProgress.set(.2),$("#email").parents(".animated").find("i").text("done").addClass("teal-text"))}):$("#email").parents(".animated").find("i").text("warning").removeClass("teal-text").addClass("red-text")}),$("div#two").on("change",":checkbox.already",function(){$(this).is(":checked")?(NProgress.inc(.01),$(this).parents("div.feature").find("p.marque").addClass("blue-text")):(NProgress.inc(-.01),$(this).parents("div.feature").find("p.marque").removeClass("blue-text"))}),$("div#two").on("change",":checkbox.discover",function(){$(this).is(":checked")?(NProgress.inc(.01),$(this).parents("div.feature").find("p.marque").addClass("teal-text")):(NProgress.inc(-.01),$(this).parents("div.feature").find("p.marque").removeClass("teal-text"))});var f=0;$(".naviguations button#plus").click(function(){f++,f<=5?5==f?($(this).addClass("light-blue"),$(this).html('<i class="material-icons">check</i> Terminer'),NProgress.set(.9)):($(this).removeClass("light-blue"),$(this).html('<i class="material-icons">keyboard_arrow_right</i> Suivant'),$(".naviguations button#moins").attr("disabled",!1),$("#list section").addClass("hide"),$("#list section:eq("+f+")").removeClass("hide")):($(this).attr("disabled",!0),$(".tabs .tab").addClass("disabled"),$(".tabs .tab:eq(2)").removeClass("disabled"),$("ul.tabs").tabs("select_tab","three"),NProgress.done(),$.ajax({url:"index.php/register",method:"POST",data:$("form").serialize()}))}),$(".naviguations button#moins").click(function(){f--,f>=0?($(".naviguations button#plus").attr("disabled",!1),$("#list section").addClass("hide"),$("#list section:eq("+f+")").removeClass("hide")):$(this).attr("disabled",!0)})});